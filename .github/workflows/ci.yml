name: Deploy Extension

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Publish Extension
        uses: cezarypiatek/VsixPublisherAction@1.1
        with:
          extension-file: src\MappingGenerator.Vsix\bin\Release\MappingGenerator.vsix
          publish-manifest-file: src\MappingGenerator.Vsix\publishManifest.json
          personal-access-code: ${{ secrets.VS_MARKETPLACE_TOKEN }}